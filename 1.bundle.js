(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{1:function(t,e,n){"use strict";n.r(e);var r=n(10),i=n(20),s=n.n(i),a=n(96);function o(){let t,e,n;for(;t=Math.floor(256*Math.random()),e=Math.floor(256*Math.random()),n=Math.floor(256*Math.random()),!(t+e+n<672););return`rgba(${t},${e},${n},0.5)`}var l=new class{constructor(){let t,e=a.g("body").append("svg"),n=s()("svg").width(),r=s()("svg").height(),i=e.append("g"),o=e.append("g"),l=e.append("g"),c=e.append("g"),h=n/50,d=r/50,u=a.f().domain([0,n]).range([0,n]).nice(),p=a.f().domain([0,r]).range([r,0]).nice(),f=(t,e)=>t.attr("transform",`translate(0,${r})`).call(a.b(e).ticks(h)).call(t=>t.select(".domain").attr("display","none")),g=(t,e)=>t.attr("transform","translate(0,0)").call(a.a(e).ticks(Math.floor(d))).call(t=>t.select(".domain").attr("display","none")),v=(t,e,i)=>t.attr("stroke","currentColor").attr("stroke-opacity",.1).call(t=>t.selectAll(".x").data(e.ticks(h)).join(t=>t.append("line").attr("class","x").attr("y2",r),t=>t,t=>t.remove()).attr("x1",t=>e(t)).attr("x2",t=>e(t))).call(t=>t.selectAll(".y").data(i.ticks(d)).join(t=>t.append("line").attr("class","y").attr("x2",n),t=>t,t=>t.remove()).attr("y1",t=>i(t)).attr("y2",t=>i(t))),m=!1,y=(t,e)=>{if(this.drawing||"fixed"==this.mode)return;m=!0;let n=this.invertTransX(),r=this.invertTransY(),i=[n(e.x),r(e.y)];a.g(t).data([i]);let s=a.g(t.parentNode).selectAll("circle").data();a.g(t.parentNode).select("polyline").data([s.concat([s[0]])]),this.currentPolygon=s,this.removeShape("tri-lines"),this.removeShape("path-lines"),this.applyTransform()};this.zoom=a.h().scaleExtent([.2,50]).on("zoom",({transform:t})=>{this.currentTransform=t,this.applyTransform();let e=t.rescaleX(u),n=t.rescaleY(p);l.call(f,e),c.call(g,n),i.call(v,e,n)}),this.pointDragger=a.c().on("drag",(function(t){y(this,t)})).on("end",()=>m=!1),e.on("mouseup",e=>{if(m||this.drawn)return;if("draw-polygon"!=this.mode&&"draw-points"!=this.mode)return;this.drawing=!0;let n=this.invertTransX(),r=this.invertTransY(),i=a.e(e),o=[n(i[0]),r(i[1])];if(t=o,"draw-points"==this.mode)this.drawPoints([o]);else if(e.target.hasAttribute("is-handle")){if(this.currentDrawPoints.length<=2)return;this.canvas.select("g.drawing").remove();let t=s()("#pick-color").val()+"77";this.drawPolygon(this.currentDrawPoints,{color:t,vertexColor:"#FDBC07",fixed:!1}),this.currentDrawPoints=[],this.drawing=!1,this.drawn=!0}else{this.currentDrawPoints.push(o),this.canvas.select("g.drawing").remove();this.drawPolygon(this.currentDrawPoints,{vertexColor:"yellow",close:!1},"drawing")}}),e.on("mousemove",e=>{if(!this.drawing||"draw-polygon"!=this.mode)return;let n=this.invertTransX(),r=this.invertTransY(),i=a.e(e),s=[n(i[0]),r(i[1])],o=this.canvas.select("g.drawing");o.select("line").remove(),o.insert("line",":first-child").data([[t,s]]).attr("stroke","#53DBF3").attr("stroke-width",1),this.applyTransform()}),e.call(this.zoom),this.drawing=!1,this.drawn=!1,this.currentDrawPoints=[],this.currentPolygon=[],this.mode="move",this.width=n,this.height=r,this.svg=e,this.canvas=o,this.currentTransform=a.i,this.xScale=u,this.yScale=p,this.autoScale([])}clearCanvas(){this.drawing=!1,this.drawn=!1,this.currentDrawPoints=[],this.currentPolygon=[],this.removeShape("polygon"),this.removeShape("endpoints"),this.removeShape("drawing")}setMode(t){switch(t){case"move":this.mode=t,this.svg.call(this.zoom);break;case"draw-polygon":this.mode=t,this.removeShape("fixed-polygon"),this.removeShape("tri-lines"),this.removeShape("path-lines"),this.removeShape("endpoints"),this.svg.on(".zoom",null);break;case"fixed":this.mode=t,this.svg.on(".zoom",null);break;case"draw-points":this.mode=t}}transX(){return this.currentTransform.rescaleX(this.xScale)}transY(){return this.currentTransform.rescaleY(this.yScale)}invertTransX(){return this.currentTransform.rescaleX(this.xScale).invert}invertTransY(){return this.currentTransform.rescaleY(this.yScale).invert}applyTransform(){let t=this.transX(),e=this.transY();this.canvas.selectAll("circle").attr("cx",e=>t(e[0])).attr("cy",t=>e(t[1])),this.canvas.selectAll("line").attr("x1",e=>t(e[0][0])).attr("y1",t=>e(t[0][1])).attr("x2",e=>t(e[1][0])).attr("y2",t=>e(t[1][1])),this.canvas.selectAll("polygon").attr("points",n=>n.map(n=>[t(n[0]),e(n[1])])),this.canvas.selectAll("polyline").attr("points",n=>n.map(n=>[t(n[0]),e(n[1])]))}autoScale(t){let[e,n]=a.d(t,t=>t[0]),[r,i]=a.d(t,t=>t[1]);t.length||(e=n=r=i=0);let s=.8*Math.min(Math.abs(this.width/(this.xScale(n-e+1)-this.xScale(0))),Math.abs(this.height/(this.yScale(i-r+1)-this.yScale(0))));s=Math.min(Math.max(s,.2),50);let o=(this.width-(this.xScale(e)+this.xScale(n))*s)/2,l=(this.height-(this.yScale(i)+this.yScale(r))*s)/2;this.currentTransform=a.i.translate(o,l).scale(s),this.svg.call(this.zoom.transform,this.currentTransform)}removeShape(t){this.canvas.selectAll("g."+t).remove()}drawPolygon(t,e,n=""){let r={color:"red",vertexColor:"#FDBC07",vertexSize:5,close:!0,fixed:!0,...e};r.close&&r.fixed&&(n+=" fixed-polygon");let i=this.canvas.append("g").attr("class","polygon "+n);r.close?(i.append("polyline").data([t.concat([t[0]])]).style("fill",r.color).attr("stroke","#ccc"),this.currentPolygon=t):i.append("polyline").data([t]).style("fill","none").attr("stroke","#000");let s=i.selectAll("circle").data(t).join("circle").attr("r",r.vertexSize).attr("fill",r.vertexColor).attr("stroke","#000");r.close&&!r.fixed?s.style("cursor","move").call(this.pointDragger):r.close||s.attr("is-handle",!0).style("cursor","pointer"),this.applyTransform()}drawLines(t,e="#FDBC07",n="lines"){this.removeShape(n),this.canvas.select(".polygon").insert("g",":nth-child(2)").attr("class",n).selectAll("line").data(t).join("line").attr("x1",t=>t[0][0]).attr("y1",t=>t[0][1]).attr("x2",t=>t[1][0]).attr("y2",t=>t[1][1]).attr("stroke",e).attr("opacity",1).attr("stroke-width",1),this.applyTransform()}drawPoints(t,e=5,n="#996f6e"){this.restartDrawPoints(),this.canvas.append("g").attr("class","endpoints").selectAll("circle").data(t).join("circle").attr("r",e).attr("fill",n).attr("stroke","#000"),this.applyTransform()}restartDrawPoints(){this.canvas.selectAll("g.endpoints").size()>=2&&(this.removeShape("endpoints"),this.removeShape("path-lines"))}hasTwoPoints(){return 2==this.canvas.selectAll("g.endpoints").size()}getTwoPoints(){let t=this.canvas.selectAll("g.endpoints circle"),e=[];t.each((function(t,n){e.push([a.g(this).attr("cx"),a.g(this).attr("cy")])}));let n=this.invertTransX(),r=this.invertTransY();return e.map(t=>[n(t[0]),r(t[1])])}existLines(t){return!this.canvas.selectAll("g."+t).empty()}hideLines(t){let e=this.canvas.selectAll(`g.${t} line`);e.attr("opacity",~e.attr("opacity"))}getCurrentPolygon(){return this.currentPolygon}};function c(t){let e=s()("#alert");e.text(t),e.slideDown("slow",()=>setTimeout(()=>e.slideUp("slow"),1e3))}s()(()=>{s()("#move-btn").on("click",()=>{s()("#move-btn").addClass("active"),s()("#polygon-btn").removeClass("active"),s()("#adv-btn").removeClass("active"),s()("#draw-opts").hide(),s()("#gen-opts").hide(),s()("#adv-opts").hide(),l.setMode("move")}),document.getElementById("polygon-btn").addEventListener("hidden.bs.dropdown",()=>{switch(s()("#move-btn").removeClass("active"),s()("#polygon-btn").addClass("active"),s()("#adv-btn").removeClass("active"),s()("#adv-opts").hide(),s()("#polygon-btn").val()){case"draw":s()("#draw-opts").show(),s()("#gen-opts").hide(),l.setMode("draw-polygon");break;case"random":s()("#draw-opts").hide(),s()("#gen-opts").show(),l.setMode("fixed");break;case"load":s()("#draw-opts").hide(),s()("#gen-opts").hide(),l.setMode("fixed"),function(){document.getElementById("file-opt").click();var t=s()("#file-opt")[0].files,e=new FileReader;e.readAsText(t[0],"UTF-8"),e.onload=function(t){var e=t.target.result;console.log("file content is",e)}}()}}),s()("#adv-btn").on("click",()=>{s()("#move-btn").removeClass("active"),s()("#polygon-btn").removeClass("active"),s()("#adv-btn").addClass("active"),s()("#draw-opts").hide(),s()("#gen-opts").hide(),s()("#adv-opts").show()}),s()("#algo-btn").next().children().on("click",(function(t){let e=s()(t.target);s()("#algo-btn").val(e.val()).text(e.text())})),s()("#polygon-btn").next().children().on("click",(function(t){let e=s()(t.target);s()("#polygon-btn").val(e.val()).text(e.text())})),s()("#tri-btn").on("click",()=>{if(l.existLines("tri-lines"))l.hideLines("tri-lines");else{let t=l.getCurrentPolygon();if(!r.g(t))return void c("Not a simple polygon!");r.f(t)||t.reverse();let e=r.h(t,"mono_partition");l.drawLines(e.map(e=>[t[e[0]],t[e[1]]]),"#9c3829","tri-lines")}}),s()("#path-btn").on("click",()=>{if(l.existLines("path-lines"))l.hideLines("path-lines");else if(l.hasTwoPoints()){let t=l.getCurrentPolygon();if(!r.g(t))return void c("Not a simple polygon!");r.f(t)||t.reverse();let e=l.getTwoPoints();console.log(e);let n=r.d(t,e[0],e[1],"mono_partition");console.log(n);let i=[];if(null==n)return;0==n.length?i.push([e[0],e[1]]):(n.forEach((function(e,r){r!=n.length-1&&i.push([t[e],t[n[r+1]]])})),i.unshift([e[0],t[n[0]]]),i.push([t[n[n.length-1]],e[1]])),l.drawLines(i,"#2c507b","path-lines")}}),s()("#point-btn").on("click",()=>{l.setMode("draw-points")}),s()("#clear-btn").on("click",()=>{l.clearCanvas()}),s()("#gen-btn").on("click",()=>{!function(t,e){let n=r.e(t,e);console.log(t,e,n),console.log(r.f(n)),console.log(r.g(n)),l.clearCanvas(),l.drawPolygon(n,{color:o(),vertexSize:3}),l.autoScale(n)}(s()("#pick-size").val(),s()("#algo-btn").val())})})},10:function(t,e,n){"use strict";(function(t){n.d(e,"e",(function(){return w})),n.d(e,"f",(function(){return T})),n.d(e,"g",(function(){return k})),n.d(e,"h",(function(){return S})),n.d(e,"d",(function(){return P})),n.d(e,"a",(function(){return C})),n.d(e,"c",(function(){return A})),n.d(e,"b",(function(){return D}));var r=n(95);const i=new Array(32).fill(void 0);function s(t){return i[t]}i.push(void 0,null,!0,!1);let a=0,o=null;function l(){return null!==o&&o.buffer===r.h.buffer||(o=new Uint8Array(r.h.buffer)),o}let c=new("undefined"==typeof TextEncoder?(0,t.require)("util").TextEncoder:TextEncoder)("utf-8");const h="function"==typeof c.encodeInto?function(t,e){return c.encodeInto(t,e)}:function(t,e){const n=c.encode(t);return e.set(n),{read:t.length,written:n.length}};function d(t,e,n){if(void 0===n){const n=c.encode(t),r=e(n.length);return l().subarray(r,r+n.length).set(n),a=n.length,r}let r=t.length,i=e(r);const s=l();let o=0;for(;o<r;o++){const e=t.charCodeAt(o);if(e>127)break;s[i+o]=e}if(o!==r){0!==o&&(t=t.slice(o)),i=n(i,r,r=o+3*t.length);const e=l().subarray(i+o,i+r);o+=h(t,e).written}return a=o,i}let u=null;function p(){return null!==u&&u.buffer===r.h.buffer||(u=new Int32Array(r.h.buffer)),u}let f=new("undefined"==typeof TextDecoder?(0,t.require)("util").TextDecoder:TextDecoder)("utf-8",{ignoreBOM:!0,fatal:!0});function g(t,e){return f.decode(l().subarray(t,t+e))}f.decode();let v=i.length;function m(t){return null==t}function y(t){const e=s(t);return function(t){t<36||(i[t]=v,v=t)}(t),e}function w(t,e){var n=m(e)?0:d(e,r.a,r.b),i=a;return y(r.d(t,n,i))}let x=32;function b(t){if(1==x)throw new Error("out of js stack");return i[--x]=t,x}function T(t){try{return 0!==r.f(b(t))}finally{i[x++]=void 0}}function k(t){try{return 0!==r.g(b(t))}finally{i[x++]=void 0}}function S(t,e){try{var n=m(e)?0:d(e,r.a,r.b),s=a;return y(r.i(b(t),n,s))}finally{i[x++]=void 0}}function P(t,e,n,s){try{var o=m(s)?0:d(s,r.a,r.b),l=a;return y(r.c(b(t),b(e),b(n),o,l))}finally{i[x++]=void 0,i[x++]=void 0,i[x++]=void 0}}const C=function(t,e){alert(g(t,e))},A=function(t,e){const n=s(e);var i=d(JSON.stringify(void 0===n?null:n),r.a,r.b),o=a;p()[t/4+1]=o,p()[t/4+0]=i},D=function(t,e){return function(t){v===i.length&&i.push(i.length+1);const e=v;return v=i[e],i[e]=t,e}(JSON.parse(g(t,e)))}}).call(this,n(94)(t))},95:function(t,e,n){"use strict";var r=n.w[t.i];t.exports=r;n(10);r.j()}}]);